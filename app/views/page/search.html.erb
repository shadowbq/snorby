<%= stylesheet 'jquery' %>
<%= javascript :header, 'daterangepicker' %>

<% content_for :footer do %>

  <script type="text/javascript">

    var rule = new SearchRule(<%= Snorby::Search.json %>);
    rule.searchUI({
      cssClass: "submit-search",
      buttonTitle: "Submit Search"
    });
    rule.add();rule.add();rule.add();

$('.search-content-add').live('click', function(e) {
    e.preventDefault();
    rule.add(this);
});
$('.search-content-remove').live('click', function(e) {
    e.preventDefault();
    rule.remove(this);
});

$('div.search-content-enable input').live('click', function() {
    if ($(this).is(':checked')) {
      $(this)
      .parents('.search-content-box')
      .find('.value *, .operator-select *, .column-select *')
      .attr('disabled', false).css('opacity', 1);
    } else {
      $(this)
      .parents('.search-content-box')
      .find('.value *, .operator-select *, .column-select *')
      .attr('disabled', true).css('opacity', 0.8);
    };
});

$('button.submit-search').live('click', function(e) {
  e.preventDefault();
  rule.submit();
});

  $('#content #title').on('click', 'a.reset-search-form', function(e) {
    e.preventDefault();

    $('.rules').empty();

    rule.add();
    rule.add();
    rule.add();
  });

	</script>

<% end %>

<%= title "Snorby Advanced Search" do %>

	<%= drop_down_for('More Options', 'icons/filter.png', 'options') do %>

    <%= drop_down_item "Save Current Search", new_saved_search_path, nil, { :class => "snorbybox" } %>

    <%= drop_down_item "View Saved Searches", saved_searches_path, nil %>

    <%= drop_down_item "Reset Search Form", '#', nil, {:class => 'reset-search-form'} %>

	<% end %>

<% end %>

