<% content_for :footer do %>

	<script type="text/javascript">
		
		$(document).ready(function(){
		  
		 var ticks = <%= @ticks %>;
		 
		 $.dash.proto = $.jqplot ('protocol-graph', [[<%= @tcp.join(', ') %>], [<%= @udp.join(', ') %>], [<%= @icmp.join(', ') %>] ], {
		      title: "Protocol Count vs Time",
		      height: 200,
		      width: 300,
		      series:[
		        {label:'tcp', markerOptions: { style:"circle" }}, 
		        {label:'ucp', markerOptions: { style:"diamond" }},
		        {label:'icmp', markerOptions: { style:"filledSquare" }}
		        ],
		      axesDefaults: {
		        labelRenderer: $.jqplot.CanvasAxisLabelRenderer
		      },
		      seriesDefaults: {
		          rendererOptions: {
		              smooth: true
		          }
		      },
		      highlighter: {
			       show: true,
			       useXTickMarks: true, 
			       sizeAdjust: 9.5
			  },
			  grid: { drawGridlines: true },
			  cursor: { show: true, zoom: false },
		      legend: { show:true, location: 'e' },
		      axes: {
		        xaxis: {
		        	tickOptions:{ showGridline:false},	 
		        	ticks: ticks,
		        	pad: 0,
				<% if (@range == 'year' || @range == 'quarter') %>
					label: 'Month of Year'
				<% elsif (@range == 'month' || @range == 'last_month') %>
					label: 'Date of Month'
				<% elsif (@range == 'week' || @range == 'last_week') %>
					label: 'Date Of Week'
				<% elsif @range == 'last_24' %>
  					label: 'Last 24 Hours'
				<% else %>
					label: 'Hour of Day'
				<% end %>
		          
		        },
		        yaxis: {
		                 	
		          label: 'Protocol Count'
		        }
		      }
		    });
		});
		
	</script>

<% end %>

<div id='protocol-graph' style='display:none;' class='dashboard-graph'></div>
